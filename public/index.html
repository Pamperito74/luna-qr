<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="Private QR Code Generator" />
    <meta
      property="og:description"
      content="Generate QR codes instantly without tracking or data collection."
    />
    <meta
      property="og:image"
      content="https://luna-qr.onrender.com/moon.png"
    />
    <meta property="og:url" content="https://luna-qr.onrender.com/" />
    <meta name="twitter:card" content="summary_large_image" />

    <title>Private QR Code Generator â€“ No Tracking, Fast & Secure</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/png" href="luna.png" />
  </head>
  <body>
    <div class="container">
      <h1>Luna QR Generator</h1>

      <p class="privacy-note">
        Unlike many online QR generators that track when or where a QR code is
        scanned, our tool does not collect or store any data. It simply
        generates a clean, privacy-safe QR code directly on this server.
      </p>
      <div class="card">
        <div id="qrContainer" class="qr">
          <img src="moon.png" alt="moon" id="qrImage" />
        </div>

        <input type="text" id="inputText" placeholder="Enter URL or email" />

        <div class="btn-row">
          <button id="generateBtn" title="Generate">âš™ï¸</button>
          <button id="clearBtn" title="Clear">ğŸ§¹</button>
          <button id="downloadBtn" class="hidden" title="Download">â¬‡ï¸</button>
        </div>

        <p> Tap a button, be a hero ğŸ¦¸â€â™‚ï¸ğŸ’–</p>
        <div class="donate-row">
            <button class="donate" data-amount="1">$1</button>
            <button class="donate" data-amount="5">$5</button>
            <button class="donate" data-amount="10">$10</button>
        </div>
      </div>
    </div>

    <script>
      const inputText = document.getElementById("inputText");
      const generateBtn = document.getElementById("generateBtn");
      const clearBtn = document.getElementById("clearBtn");
      const downloadBtn = document.getElementById("downloadBtn");
      const qrImage = document.getElementById("qrImage");

      generateBtn.onclick = async () => {
        const text = inputText.value.trim();
        if (!text) return alert("Please enter a URL or email.");

        const res = await fetch("/generate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text }),
        });

        const data = await res.json();
        if (data.qr) {
          qrImage.src = data.qr;
          downloadBtn.classList.remove("hidden");
          downloadBtn.onclick = () => downloadQR(data.qr);
        }
      };

      clearBtn.onclick = () => {
        inputText.value = "";
        qrImage.src = "moon.png";
        downloadBtn.classList.add("hidden");
      };

      function downloadQR(dataUrl) {
        const a = document.createElement("a");
        a.href = dataUrl;
        a.download = "qr-code.png";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
      }

      document.querySelectorAll(".donate").forEach((btn) => {
        btn.onclick = () => {
          const amount = btn.dataset.amount;
          const paypalUrl = `https://www.paypal.com/donate?business=daniel.oceno@gmail.com&amount=${amount}&currency_code=USD`;
          window.open(paypalUrl, "_blank");
        };
      });
    </script>
  </body>
</html>
